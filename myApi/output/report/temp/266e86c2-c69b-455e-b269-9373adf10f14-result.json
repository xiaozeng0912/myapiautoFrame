{"name": "验证登录接口失败", "status": "broken", "statusDetails": {"message": "AttributeError: 'NoneType' object has no attribute 'status_code'", "trace": "self = <test_login.TestLogin object at 0x00000149E9A6E8D0>\nbase_info = {'api_name': '登录接口', 'header': {'Content-Type': 'application/x-www-form-urlencoded;charset=UTF-8'}, 'method': 'post', 'url': '/dar/user/login'}\ntest_case = {'data': {'passwd': 'admin124', 'user_name': 'test01'}}\n\n    @allure.story(next(c_id)+'登录接口')\n    @pytest.mark.parametrize('base_info,test_case',get_test_case_yaml(FILE_PATH['LOGIN_YAML']))\n    def test_login(self,base_info,test_case):\n        # 获取用例标题\n        allure.dynamic.title(test_case['case_name'])\n>       RequestBase().specification_yaml(base_info,test_case)\n\ntestcase\\LoginAPI\\test_login.py:14: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\nbase\\apiutls.py:114: in specification_yaml\n    raise e\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\nself = <base.apiutls.RequestBase object at 0x00000149E9AC8950>\nbase_info = {'api_name': '登录接口', 'header': {'Content-Type': 'application/x-www-form-urlencoded;charset=UTF-8'}, 'method': 'post', 'url': '/dar/user/login'}\ntest_case = {'data': {'passwd': 'admin124', 'user_name': 'test01'}}\n\n    def specification_yaml(self,base_info,test_case):\n        try:\n            api_name = base_info['api_name']\n            allure.attach(api_name, f'接口名称：{api_name}', allure.attachment_type.TEXT)\n            host_url = self.conf.get_api_host()\n            url = host_url + base_info['url']\n            allure.attach(api_name, f'接口地址：{url}', allure.attachment_type.TEXT)\n            method = base_info['method']\n            allure.attach(api_name, f'请求方法：{method}', allure.attachment_type.TEXT)\n            header = self.replace_data(base_info['header'])\n            allure.attach(api_name, f'请求头：{header}', allure.attachment_type.TEXT)\n            # cookies的处理\n            cookie = None\n            if base_info.get('cookies') is not None:\n                cookie = eval(self.replace_data(base_info['cookies']))\n            case_name = test_case.pop('case_name')\n            allure.attach(api_name, f'测试用例名称：{case_name}', allure.attachment_type.TEXT)\n            # 请求参数处理 data json params\n            params_type = ['data','json','params']\n            for key,value in test_case.items():\n                if key in params_type:\n                    # 处理动态替换\n                    test_case[key] = self.replace_data(value)\n    \n            # todo 上传文件处理 files  格式 files =  {变量名:open(文件，rb)}\n            file,files = base_info.pop('files',None),None\n            if file is not None:\n                for fk,fv in file.items():\n                    files = {fk,open(fv,'rb')}\n    \n            # todo 断言处理 validation\n            val = self.replace_data(test_case.get('validation'))\n            test_case['validation'] = val\n            # eval将字符串转换为字典\n            validation = eval(test_case.pop('validation'))\n    \n            # todo 返回结果提取值处理 extract / extract_list\n            extract = test_case.pop('extract',None)\n            extract_list = test_case.pop('extract_list',None)\n    \n            # 最终调用下面方法去发送请求\n            res = self.run.run_main(name=api_name,case_name=case_name,url=url,header=header,method=method,cookies=cookie,file=files,**test_case)\n>           status_code = res.status_code\nE           AttributeError: 'NoneType' object has no attribute 'status_code'\n\nbase\\apiutls.py:95: AttributeError"}, "attachments": [{"name": "接口名称：登录接口", "source": "d39e64f2-bbb5-44e7-b6bb-0c7ec38f72d0-attachment.txt", "type": "text/plain"}, {"name": "接口地址：http://127.0.0.1:8787/dar/user/login", "source": "1bdcaeb4-16f1-4775-9733-e7634d2884fd-attachment.txt", "type": "text/plain"}, {"name": "请求方法：post", "source": "7323175a-f7fc-464a-a17b-85fa06597407-attachment.txt", "type": "text/plain"}, {"name": "请求头：{'Content-Type': 'application/x-www-form-urlencoded;charset=UTF-8'}", "source": "c059bafb-5a3d-4633-b878-6eeb3171098f-attachment.txt", "type": "text/plain"}, {"name": "测试用例名称：验证登录接口失败", "source": "483b224b-06bf-403f-b673-c65e82ff0245-attachment.txt", "type": "text/plain"}, {"name": "请求参数", "source": "85f8efbf-a19d-4628-9207-8650b3fb69d3-attachment.txt", "type": "text/plain"}], "parameters": [{"name": "base_info", "value": "{'api_name': '登录接口', 'url': '/dar/user/login', 'method': 'post', 'header': {'Content-Type': 'application/x-www-form-urlencoded;charset=UTF-8'}}"}, {"name": "test_case", "value": "{'case_name': '验证登录接口失败', 'data': {'user_name': 'test01', 'passwd': 'admin124'}, 'validation': [{'contains': {'msg': '参数错误'}}]}"}], "start": 1765282417140, "stop": 1765282419176, "uuid": "d0f717ab-cecf-49ee-8499-df3a47bf9485", "historyId": "14814a0a25eb9de16f8715296df3f14b", "testCaseId": "aec0fbd99aea08cae6941db7ba01589c", "fullName": "testcase.LoginAPI.test_login.TestLogin#test_login", "labels": [{"name": "feature", "value": "测试项目"}, {"name": "story", "value": "C01_登录接口"}, {"name": "parentSuite", "value": "testcase.LoginAPI"}, {"name": "suite", "value": "test_login"}, {"name": "subSuite", "value": "TestLogin"}, {"name": "host", "value": "WIN-JVDVMNLRFPR"}, {"name": "thread", "value": "3584-MainThread"}, {"name": "framework", "value": "pytest"}, {"name": "language", "value": "cpython3"}, {"name": "package", "value": "testcase.LoginAPI.test_login"}], "titlePath": ["testcase", "LoginAPI", "test_login.py", "TestLogin"]}