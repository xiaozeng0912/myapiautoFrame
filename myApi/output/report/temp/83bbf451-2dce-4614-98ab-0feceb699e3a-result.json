{"name": "验证登录接口成功", "status": "broken", "statusDetails": {"message": "AttributeError: 'NoneType' object has no attribute 'status_code'", "trace": "self = <test_login.TestLogin object at 0x00000149E9A6D490>\nbase_info = {'api_name': '登录接口', 'header': {'Content-Type': 'application/x-www-form-urlencoded;charset=UTF-8'}, 'method': 'post', 'url': '/dar/user/login'}\ntest_case = {'data': {'passwd': 'admin123', 'user_name': 'test01'}}\n\n    @allure.story(next(c_id)+'登录接口')\n    @pytest.mark.parametrize('base_info,test_case',get_test_case_yaml(FILE_PATH['LOGIN_YAML']))\n    def test_login(self,base_info,test_case):\n        # 获取用例标题\n        allure.dynamic.title(test_case['case_name'])\n>       RequestBase().specification_yaml(base_info,test_case)\n\ntestcase\\LoginAPI\\test_login.py:14: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\nbase\\apiutls.py:114: in specification_yaml\n    raise e\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\nself = <base.apiutls.RequestBase object at 0x00000149E9A6ED90>\nbase_info = {'api_name': '登录接口', 'header': {'Content-Type': 'application/x-www-form-urlencoded;charset=UTF-8'}, 'method': 'post', 'url': '/dar/user/login'}\ntest_case = {'data': {'passwd': 'admin123', 'user_name': 'test01'}}\n\n    def specification_yaml(self,base_info,test_case):\n        try:\n            api_name = base_info['api_name']\n            allure.attach(api_name, f'接口名称：{api_name}', allure.attachment_type.TEXT)\n            host_url = self.conf.get_api_host()\n            url = host_url + base_info['url']\n            allure.attach(api_name, f'接口地址：{url}', allure.attachment_type.TEXT)\n            method = base_info['method']\n            allure.attach(api_name, f'请求方法：{method}', allure.attachment_type.TEXT)\n            header = self.replace_data(base_info['header'])\n            allure.attach(api_name, f'请求头：{header}', allure.attachment_type.TEXT)\n            # cookies的处理\n            cookie = None\n            if base_info.get('cookies') is not None:\n                cookie = eval(self.replace_data(base_info['cookies']))\n            case_name = test_case.pop('case_name')\n            allure.attach(api_name, f'测试用例名称：{case_name}', allure.attachment_type.TEXT)\n            # 请求参数处理 data json params\n            params_type = ['data','json','params']\n            for key,value in test_case.items():\n                if key in params_type:\n                    # 处理动态替换\n                    test_case[key] = self.replace_data(value)\n    \n            # todo 上传文件处理 files  格式 files =  {变量名:open(文件，rb)}\n            file,files = base_info.pop('files',None),None\n            if file is not None:\n                for fk,fv in file.items():\n                    files = {fk,open(fv,'rb')}\n    \n            # todo 断言处理 validation\n            val = self.replace_data(test_case.get('validation'))\n            test_case['validation'] = val\n            # eval将字符串转换为字典\n            validation = eval(test_case.pop('validation'))\n    \n            # todo 返回结果提取值处理 extract / extract_list\n            extract = test_case.pop('extract',None)\n            extract_list = test_case.pop('extract_list',None)\n    \n            # 最终调用下面方法去发送请求\n            res = self.run.run_main(name=api_name,case_name=case_name,url=url,header=header,method=method,cookies=cookie,file=files,**test_case)\n>           status_code = res.status_code\nE           AttributeError: 'NoneType' object has no attribute 'status_code'\n\nbase\\apiutls.py:95: AttributeError"}, "attachments": [{"name": "接口名称：登录接口", "source": "5cc3c1ac-bbb1-405d-b188-09d7d1b1209f-attachment.txt", "type": "text/plain"}, {"name": "接口地址：http://127.0.0.1:8787/dar/user/login", "source": "e7b1a6c8-96c3-4ad8-a26c-824ed55f5fc1-attachment.txt", "type": "text/plain"}, {"name": "请求方法：post", "source": "a1646949-8513-4f94-b8f5-52a35e8ab0b1-attachment.txt", "type": "text/plain"}, {"name": "请求头：{'Content-Type': 'application/x-www-form-urlencoded;charset=UTF-8'}", "source": "012761d5-1ec3-48f5-a93b-9ec122bf82e6-attachment.txt", "type": "text/plain"}, {"name": "测试用例名称：验证登录接口成功", "source": "a9b4851a-529a-4945-819a-8d0a0c67af1a-attachment.txt", "type": "text/plain"}, {"name": "请求参数", "source": "ff575d2e-0602-4a24-84c0-dcc39e038e62-attachment.txt", "type": "text/plain"}], "parameters": [{"name": "base_info", "value": "{'api_name': '登录接口', 'url': '/dar/user/login', 'method': 'post', 'header': {'Content-Type': 'application/x-www-form-urlencoded;charset=UTF-8'}}"}, {"name": "test_case", "value": "{'case_name': '验证登录接口成功', 'data': {'user_name': 'test01', 'passwd': 'admin123'}, 'extract': {'token_id': '$..token'}, 'validation': [{'contains': {'msg': '登录成功'}}]}"}], "start": 1765282415032, "stop": 1765282417080, "uuid": "9346d98f-3533-4f00-8cc3-6528f3c9ada6", "historyId": "816961896e690ac1afc935cbfa81706c", "testCaseId": "aec0fbd99aea08cae6941db7ba01589c", "fullName": "testcase.LoginAPI.test_login.TestLogin#test_login", "labels": [{"name": "feature", "value": "测试项目"}, {"name": "story", "value": "C01_登录接口"}, {"name": "parentSuite", "value": "testcase.LoginAPI"}, {"name": "suite", "value": "test_login"}, {"name": "subSuite", "value": "TestLogin"}, {"name": "host", "value": "WIN-JVDVMNLRFPR"}, {"name": "thread", "value": "3584-MainThread"}, {"name": "framework", "value": "pytest"}, {"name": "language", "value": "cpython3"}, {"name": "package", "value": "testcase.LoginAPI.test_login"}], "titlePath": ["testcase", "LoginAPI", "test_login.py", "TestLogin"]}